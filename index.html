<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Helalink — Launching Sept 13</title>
  <meta name="description" content="Helalink — Unlock real online earning methods. Launching Sept 13. Allow reminders for priority onboarding & launch bonuses.">
  <style>
    :root{
      --bg-1:#050515; --bg-2:#0a0f2a; --glass:rgba(255,255,255,0.06);
      --rainbow: linear-gradient(90deg,#ff0057,#ff7a00,#ffd400,#2be2a5,#00c6ff,#9b6bff,#ff0057);
      --gold-1:#ffd54a; --gold-2:#ffb300;
    }
    *{box-sizing:border-box;font-family:Inter, Poppins, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial}
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg-1),var(--bg-2));color:#f5faff}
    .page{min-height:100vh;display:flex;flex-direction:column}

    /* HERO */
    .hero{position:relative;display:grid;grid-template-columns:1.2fr 480px;gap:48px;align-items:center;padding:64px;min-height:100vh}
    #bgCanvas{position:absolute;inset:0;z-index:0}
    .hero-content{position:relative;z-index:2}

    .eyebrow{color:rgba(255,255,255,0.7);font-weight:700;letter-spacing:.12em;margin-bottom:10px;text-transform:uppercase}
    .big-header{font-size:44px;line-height:1.05;margin:0 0 10px;background:var(--rainbow);-webkit-background-clip:text;background-clip:text;color:transparent}
    .typing{display:inline-block;font-weight:800;font-size:22px;color:transparent;background:var(--rainbow);-webkit-background-clip:text;background-clip:text}
    .lead{margin-top:12px;color:rgba(231,241,255,0.85);font-size:18px;max-width:720px}

    .meta{display:flex;gap:20px;align-items:center;margin-top:24px;flex-wrap:wrap}

    /* Glowing countdown */
    .countdown{display:flex;gap:12px}
    .cd-box{position:relative;min-width:92px;padding:12px;border-radius:14px;background:linear-gradient(180deg,rgba(255,255,255,0.05),rgba(255,255,255,0.03));text-align:center}
    .cd-num{font-size:28px;font-weight:900;letter-spacing:1px;filter: drop-shadow(0 0 10px rgba(255,255,255,0.25));
      background:var(--rainbow);-webkit-background-clip:text;background-clip:text;color:transparent;animation:neon 2.2s ease-in-out infinite}
    .cd-lbl{font-size:12px;color:rgba(255,255,255,0.7)}
    @keyframes neon{0%,100%{text-shadow:0 0 10px rgba(255,255,255,0.25)}50%{text-shadow:0 0 24px rgba(255,255,255,0.55)}}

    /* CTA */
    .cta-wrap{display:flex;gap:14px}
    .btn{padding:14px 22px;border-radius:999px;border:0;cursor:pointer;font-weight:800}
    .btn-join{position:relative;background:#0b122e;color:#f5faff;border:2px solid transparent;border-image:var(--rainbow) 1;}
    .btn-join::after{content:"";position:absolute;inset:-2px;border-radius:999px;background:var(--rainbow);filter:blur(10px);opacity:.35;z-index:-1}
    .btn-join:hover{transform:translateY(-1px)}
    .pulse{animation:pulse-glow 1.4s ease-in-out infinite}
    @keyframes pulse-glow{0%{box-shadow:0 0 0 0 rgba(255,255,255,0.12)}70%{box-shadow:0 0 0 12px rgba(255,255,255,0)}100%{box-shadow:0 0 0 0 rgba(255,255,255,0)}}

    /* Right panel: Rainbow circle with orbiting shine */
    .panel{position:relative;z-index:2;display:flex;flex-direction:column;align-items:center;gap:22px}
    .logo-wrap{width:360px;height:360px;display:flex;align-items:center;justify-content:center;position:relative}
    .logo-svg{width:300px;height:300px}
    .logo-center{position:absolute;display:flex;align-items:center;justify-content:center;flex-direction:column;pointer-events:none;z-index:3}
    .logo-title{font-weight:900;font-size:30px;letter-spacing:6px}
    .logo-sub{font-size:12px;color:rgba(255,255,255,0.65);margin-top:6px}
    .orbit{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;pointer-events:none}
    .shine{width:24px;height:24px;border-radius:50%;background:radial-gradient(circle, rgba(255,255,255,0.95), rgba(255,255,255,0.1));filter:blur(6px);box-shadow:0 0 24px rgba(255,255,255,0.55);transform-origin: -140px 0px;}
    .orbit.rotate{animation:spin 5.5s linear infinite}
    @keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}

    /* coin/note stage - inside circle area */
    .coin-stage{position:absolute;width:220px;height:220px;border-radius:50%;overflow:hidden;top:50%;left:50%;transform:translate(-50%,-50%);pointer-events:none;z-index:2}
    .money{position:absolute;top:-40px;width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:900;color:#4a2d00;font-size:14px;background:radial-gradient(circle at 30% 30%, var(--gold-1), var(--gold-2));box-shadow:0 6px 12px rgba(0,0,0,0.35);opacity:0.98}
    .money.note{width:46px;height:30px;border-radius:6px;background:linear-gradient(160deg,#e8f6d7,#d4f3a6);color:#063;display:flex;align-items:center;justify-content:center;font-weight:800;font-size:12px}
    .money .label{position:relative;z-index:2}
    .money::after{content:'';position:absolute;inset:0;border-radius:inherit;box-shadow:inset 0 1px 0 rgba(255,255,255,0.5);pointer-events:none}
    @keyframes fall {0%{transform:translateY(-40px) translateX(0) rotate(0deg);opacity:1}80%{opacity:1}100%{transform:translateY(260px) translateX(var(--dx,0px)) rotate(720deg);opacity:0}}

    footer{padding:28px;text-align:center;color:rgba(255,255,255,0.45);font-size:13px}

    @media(max-width:980px){.hero{grid-template-columns:1fr;gap:28px;padding:28px}.panel{order:-1}.logo-wrap{width:300px;height:300px}.logo-svg{width:260px;height:260px}.coin-stage{width:180px;height:180px}}

    /* Notify Section */
    .notify{text-align:center;padding:28px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:16px;margin:30px auto;max-width:720px;display:flex;align-items:center;gap:18px;justify-content:center}
    .notify-box{display:flex;align-items:center;gap:14px}
    .notify .emoji{font-size:34px;animation:bounce 1.2s infinite}
    .notify-caption{font-size:16px;color:#fff;text-shadow:0 0 8px rgba(255,255,255,0.12);text-align:left}
    .notify-cta{display:flex;flex-direction:column;align-items:flex-start;gap:8px}
    .notify-small{font-size:13px;color:rgba(255,255,255,0.65)}
    .badge{font-size:12px;padding:6px 8px;border-radius:999px;background:linear-gradient(90deg,#2be2a5,#00c6ff);color:#041229;font-weight:800}
    @keyframes bounce{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}

    /* Earning Section */
    .earning{Padding:60px 20px;text-align:center}
    .earn-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:20px;margin-top:20px}
    .earn-card{padding:24px;border-radius:18px;background:linear-gradient(135deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));font-size:18px;font-weight:900;box-shadow:0 6px 18px rgba(0,0,0,0.35);transition:transform .28s,box-shadow .28s}
    .earn-card span{display:block;font-size:14px;font-weight:400;color:rgba(255,255,255,0.8);margin-top:10px}
    .earn-card:hover{transform:translateY(-8px);box-shadow:0 20px 40px rgba(0,0,0,0.45)}

    /* Bots */
    .bots{padding:60px 20px;max-width:880px;margin:auto}
    .bot{margin:14px 0;border-radius:14px;overflow:hidden;border:1px solid rgba(255,255,255,0.06);background:linear-gradient(180deg,rgba(255,255,255,0.01),rgba(255,255,255,0.005))}
    .bot-q{width:100%;text-align:left;padding:16px;background:transparent;color:#fff;font-weight:800;cursor:pointer;border:none;font-size:16px}
    .bot-q:hover{background:rgba(255,255,255,0.02)}
    .bot-a{padding:16px;display:none;background:rgba(255,255,255,0.02);color:rgba(255,255,255,0.9);font-weight:600}
    .bot-actions{margin-top:12px;display:flex;gap:10px}
    .btn-ghost{padding:10px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.08);background:transparent;color:#fff;font-weight:700;cursor:pointer}

    /* small toast */
    .toast{position:fixed;right:18px;bottom:18px;background:linear-gradient(90deg,#0b122e,rgba(11,18,46,0.6));padding:12px 16px;border-radius:12px;color:#fff;box-shadow:0 12px 30px rgba(6,7,12,0.6);display:none}

.hero-showcase {
  margin: 28px auto;
  width: 100%;
  max-width: 900px;
  border-radius: 14px;
  overflow: hidden;
  box-shadow: 0 10px 28px rgba(0,0,0,0.55);
}
.hero-showcase img {
  width: 100%;
  height: auto;
  display: block;
  object-fit: cover;
}
.hero-caption {
  font-size: 14px;
  color: rgba(255,255,255,0.65);
  margin-top: 8px;
  text-align: center;
}

  </style>
</head>
<body>
  <div class="page">
    <section class="hero">
      <canvas id="bgCanvas" aria-hidden="true"></canvas>

      <div class="hero-content">
        <div class="eyebrow">Helalink • Online Business Platform</div>
        <h2 class="big-header">The future of online earning starts here</h2>
        <h1><span class="typing" id="typingText" aria-hidden="true"></span></h1>
        <p class="lead">Be among the first to access simple, real ways to earn online with Helalink. Early members get priority onboarding, insider tips, and launch bonuses. Join now before spots fill up.</p>

<!-- Full-width Showcase -->
<div class="hero-showcase">
  <img src="https://i.postimg.cc/3wwPPSWV/IMG-20250814-WA0004.jpg" 
       alt="T-shirt with INTERNET / MONEY MAKERS print" loading="lazy" decoding="async">
  <p class="hero-caption">Branding sample — INTERNET MONEY MAKERS</p>
</div>

        <div class="meta">
          <div class="countdown" aria-live="polite">
            <div class="cd-box"><div id="d" class="cd-num">--</div><div class="cd-lbl">Days</div></div>
            <div class="cd-box"><div id="h" class="cd-num">--</div><div class="cd-lbl">Hours</div></div>
            <div class="cd-box"><div id="m" class="cd-num">--</div><div class="cd-lbl">Minutes</div></div>
            <div class="cd-box"><div id="s" class="cd-num">--</div><div class="cd-lbl">Seconds</div></div>
          </div>
          <div class="cta-wrap">
            <button id="joinBtn" type="button" class="btn btn-join pulse" aria-label="Join via WhatsApp">Join Early on WhatsApp</button>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="logo-wrap" aria-hidden="true">
          <svg class="logo-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
            <defs>
              <linearGradient id="rainbow" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#ff0057" />
                <stop offset="16%" stop-color="#ff7a00" />
                <stop offset="33%" stop-color="#ffd400" />
                <stop offset="50%" stop-color="#2be2a5" />
                <stop offset="66%" stop-color="#00c6ff" />
                <stop offset="83%" stop-color="#9b6bff" />
                <stop offset="100%" stop-color="#ff0057" />
              </linearGradient>
            </defs>
            <g transform="translate(100,100)">
              <circle r="78" fill="rgba(255,255,255,0.02)" stroke="url(#rainbow)" stroke-width="10" stroke-linecap="round" stroke-linejoin="round" />
            </g>
          </svg>

          <!-- coin-stage sits above the SVG circle and clips coins/notes inside a circular mask -->
          <div class="coin-stage" aria-hidden="true"></div>

          <div class="logo-center">
            <div class="logo-title">HELALINK</div>
          <div class="logo-sub">Launching Sept 13</div>
          </div>
          <div class="orbit rotate"><div class="shine" aria-hidden="true"></div></div>
        </div>
      </div>
    </section>
<!-- Recent Members Section with HELALINK banner -->
<section class="joined-section" aria-labelledby="joinedTitle">
  <div class="live-header">
    <h2 id="joinedTitle">🎉 Recent Members Joined</h2>
    <div class="live-status" aria-live="polite">
      <span class="dot" aria-hidden="true"></span>
      <span class="sr-only">Live feed active</span>
      <span> Live feed active now</span>
    </div>
  </div>

  <!-- Total Counter -->
  <div class="total-counter" role="status">
    🔢 Total Members: <span id="totalCount">0</span>
  </div>

  <!-- Hot Country -->
  <div class="hot-country">
    🌍🔥 Hottest Country Today: <span id="hotCountry">Loading...</span>
  </div>

  <!-- Highlighted member (fades & slides in) -->
  <div class="joined-fade" id="joinedFade" aria-hidden="false">
    <div class="member-card show" id="member1" role="article" aria-label="Highlighted member"></div>
    <div class="member-card" id="member2" role="article" aria-label="Next member"></div>
    <!-- confetti container -->
    <div id="confettiContainer" aria-hidden="true"></div>
  </div>

  <!-- Join Streaks -->
  <div class="join-streaks" id="joinStreakContainer">
    📈 <span id="joinStreak">No streak yet...</span>
  </div>

  <!-- Leaderboard style (Top 5 recent members list) -->
  <div class="leaderboard" aria-label="Top 5 recent joins">
    <h3>👥 Top 5 Recent Joins</h3>
    <ul id="leaderboardList" aria-live="polite"></ul>
  </div>
</section>

<style>
  /* --- Layout & theme --- */
  .joined-section {
    background: linear-gradient(135deg, #4facfe, #00f2fe);
    color: white;
    padding: 40px 20px;
    text-align: center;
    border-radius: 20px;
    margin: 40px auto;
    max-width: 700px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    font-family: system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
  }

  .live-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
  }

  .live-status {
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .sr-only {
    position: absolute;
    width: 1px; height: 1px;
    padding: 0; margin: -1px; overflow: hidden;
    clip: rect(0,0,0,0); white-space: nowrap; border: 0;
  }

  .dot {
    width: 10px;
    height: 10px;
    background: limegreen;
    border-radius: 50%;
    box-shadow: 0 0 10px limegreen;
    animation: dotPulse 1.5s infinite;
  }
  @keyframes dotPulse {
    0% { transform: scale(1); opacity: 1; }
    50% { transform: scale(1.3); opacity: 0.7; }
    100% { transform: scale(1); opacity: 1; }
  }

  .total-counter, .hot-country, .join-streaks {
    margin: 15px 0;
    font-size: 18px;
    font-weight: 700;
    text-shadow: 1px 2px 4px rgba(0,0,0,0.25);
  }

  /* Highlighted Member area */
  .joined-fade {
    max-width: 500px;
    margin: 20px auto 30px;
    background: rgba(255,255,255,0.12);
    border-radius: 15px;
    padding: 28px 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.18);
    position: relative;
    height: 110px;
    overflow: visible;
  }

  .member-card {
    position: absolute;
    width: calc(100% - 20px);
    left: 10px;
    top: 8px;
    font-size: 18px;
    font-weight: 700;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity var(--fade-time, 2s) ease-in-out,
                transform var(--fade-time, 2s) ease-in-out;
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 8px;
    justify-content: flex-start;
    color: white;
  }

  .member-card img {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    border: 2px solid rgba(255,255,255,0.9);
    object-fit: cover;
    background: white;
    flex-shrink: 0;
  }

  .afro-emoji { font-size: 22px; margin-left: 6px; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.35)); }

  .active-dot {
    display: inline-block;
    width: 12px;
    height: 12px;
    background: #00ff7f;
    border-radius: 50%;
    margin-right: 8px;
    box-shadow: 0 0 12px #00ff7f, 0 0 20px rgba(0,255,127,0.25);
    animation: activePulse 1s infinite;
    vertical-align: middle;
  }
  @keyframes activePulse {
    0% { transform: scale(1); opacity: 1; box-shadow: 0 0 8px #00ff7f; }
    50% { transform: scale(1.6); opacity: 0.6; box-shadow: 0 0 22px #00ff7f; }
    100% { transform: scale(1); opacity: 1; box-shadow: 0 0 8px #00ff7f; }
  }

  .member-card.show {
    opacity: 1;
    transform: translateY(0);
    animation: glowPulse 3s infinite;
  }
  @keyframes glowPulse {
    0% { text-shadow: 0 0 5px #fff, 0 0 10px #00e6ff; }
    50% { text-shadow: 0 0 15px #fff, 0 0 25px #00e6ff; }
    100% { text-shadow: 0 0 5px #fff, 0 0 10px #00e6ff; }
  }

  /* Confetti pieces */
  #confettiContainer {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: visible;
  }
  .confetti {
    position: absolute;
    width: 9px;
    height: 14px;
    opacity: 0.95;
    transform-origin: center;
    will-change: transform, opacity;
    border-radius: 2px;
    z-index: 8;
  }

  /* Leaderboard */
  .leaderboard {
    background: rgba(255,255,255,0.12);
    border-radius: 12px;
    padding: 18px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.18);
  }

  .leaderboard h3 { margin-bottom: 10px; font-size: 20px; }
  .leaderboard ul { list-style: none; padding: 0; margin: 0; }
  .leaderboard li {
    display: flex; align-items: center; gap: 10px;
    margin: 8px 0; padding: 8px 12px;
    background: rgba(255,255,255,0.06); border-radius: 8px;
    font-size: 15px; font-weight: 600; color: #fff;
    opacity: 0; transform: translateY(-6px);
    animation: slideIn 0.45s ease forwards;
    position: relative;
  }
  .leaderboard img { width: 34px; height: 34px; border-radius: 50%; border: 1px solid rgba(255,255,255,0.7); object-fit: cover; }
  .entry-active-dot { position: absolute; right: 10px; top: 10px; width: 12px; height: 12px; background: #00ff7f; border-radius: 50%; box-shadow: 0 0 12px #00ff7f; animation: activePulse 1s infinite; }
  .just-now-label {
    display: inline-block; margin-left: 8px; padding: 2px 8px;
    background: rgba(0,255,127,0.12); color: #b8ffcf; border-radius: 999px;
    font-size: 12px; font-weight: 700; border: 1px solid rgba(0,255,127,0.16);
  }
  @keyframes slideIn { to { opacity: 1; transform: translateY(0); } }

  /* responsive */
  @media (max-width:520px) {
    .joined-section { padding: 28px 14px; max-width: 95%; }
    .member-card { font-size: 15px; left: 8px; width: calc(100% - 16px); }
    .member-card img { width: 48px; height: 48px; }
  }
</style>

<script>
  /* ----------------- CONFIG ----------------- */
  const avatarMode = 'thisperson'; // 'thisperson' or 'unsplash'
  const fadeDuration = 2;   // seconds
  const displayTime = 8;    // seconds per member

  /* Countries */
  const countries = [
    { name: "Ghana", flag: "🇬🇭" },
    { name: "Kenya", flag: "🇰🇪" },
    { name: "Uganda", flag: "🇺🇬" },
    { name: "Botswana", flag: "🇧🇼" },
    { name: "Malawi", flag: "🇲🇼" },
    { name: "Cameroon", flag: "🇨🇲" }
  ];

  /* --- Helpers --- */
  function seedToInt(seed) {
    let h = 2166136261 >>> 0;
    for (let i = 0; i < seed.length; i++) {
      h ^= seed.charCodeAt(i);
      h += (h << 1) + (h << 4) + (h << 7) + (h << 8) + (h << 24);
    }
    return (h >>> 0) % 100000;
  }

  function realAvatar(seed, country, size = 256) {
    const sig = seedToInt(seed);
    if (avatarMode === 'thisperson') {
      return `https://thispersondoesnotexist.com/image?${sig}`;
    } else {
      const q = encodeURIComponent(`${country} portrait face person african`);
      return `https://source.unsplash.com/random/${size}x${size}?${q}&sig=${sig}`;
    }
  }

  function generateId() {
    return "******" + Math.floor(1000 + Math.random() * 9000);
  }

  function applyImageFallback(imgEl, preferred = avatarMode) {
    if (!imgEl) return;
    const handler = function() {
      imgEl.removeEventListener('error', handler);
      if (preferred === 'unsplash') {
        imgEl.src = `https://thispersondoesnotexist.com/image?fallback=${Date.now()}`;
      } else {
        imgEl.src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="128" height="128"><rect width="100%" height="100%" fill="%23ddd"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="%23666" font-size="14">avatar</text></svg>';
      }
    };
    imgEl.addEventListener('error', handler);
  }

  function easeOutCubic(t){ return 1 - Math.pow(1 - t, 3); }

  /* --- Data: create members --- */
  const africanNames = ["Kwame","Amina","Kofi","Nia","Chinua","Fatou","Tendai","Zainab","Ife","Amara","Sifa","Musa"];
  const members = [];
  for (let i = 0; i < 50; i++) {
    const c = countries[Math.floor(Math.random() * countries.length)];
    const name = africanNames[i % africanNames.length] + Math.floor(Math.random()*100);
    const id = generateId();
    const seed = `${c.name}-${name}-${id}`;
    members.push({
      id,
      displayName: name,
      country: c.name,
      flag: c.flag,
      avatar: realAvatar(seed, c.name, 256),
      time: 'a few mins ago'
    });
  }

  /* --- Elements + state --- */
  const member1 = document.getElementById("member1");
  const member2 = document.getElementById("member2");
  const leaderboardList = document.getElementById("leaderboardList");
  const totalCountEl = document.getElementById("totalCount");
  const hotCountryEl = document.getElementById("hotCountry");
  const joinStreakEl = document.getElementById("joinStreak");
  const confettiContainer = document.getElementById("confettiContainer");

  let index = 0;
  let active = 1;
  let totalCount = 0;
  const countryCounts = {};
  const recentCountries = [];

  // set CSS var for fade
  document.querySelectorAll(".member-card").forEach(el => el.style.setProperty("--fade-time", fadeDuration + "s"));

  /* --- Render functions --- */
  function renderMember(el, data, isActive = false) {
    el.innerHTML = `
      <img src="${data.avatar}" alt="${data.displayName} avatar" loading="lazy" decoding="async">
      <div style="text-align:left;">
        <div style="font-size:16px; font-weight:700; display:flex; align-items:center; gap:8px;">
          ${ isActive ? '<span class="active-dot" aria-hidden="true"></span>' : '' }
          <span style="display:inline-block;">${escapeHtml(data.displayName)}</span>
          <span class="afro-emoji" aria-hidden="true">🧑🏿‍🦱</span>
          ${ isActive ? '<span class="just-now-label" aria-hidden="true">Just now</span>' : '' }
        </div>
        <div style="font-size:13px; font-weight:600; opacity:0.95;">
          ${escapeHtml(data.id)} • ${escapeHtml(data.country)} ${data.flag} <small style="font-weight:400; opacity:0.85">(${data.time})</small>
        </div>
      </div>
    `;
    const img = el.querySelector('img');
    if (img) applyImageFallback(img);
  }

  function escapeHtml(unsafe) {
    return String(unsafe).replace(/[&<>"'`=\/]/g, function (s) {
      return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;',"/":'&#x2F;','`':'&#x60;','=':'&#x3D;'})[s];
    });
  }

  function confettiBurst(count = 28, originX = 50, originY = 15) {
    const colors = ["#FF5A5F","#FFD166","#06D6A0","#118AB2","#8338EC","#FF7AB6"];
    const rect = confettiContainer.getBoundingClientRect();
    const baseWidth = rect.width || (document.documentElement.clientWidth * 0.6);
    const baseHeight = rect.height || 120;
    for (let i = 0; i < count; i++) {
      const piece = document.createElement("div");
      piece.className = "confetti";
      piece.style.background = colors[Math.floor(Math.random()*colors.length)];
      const startX = (originX/100) * baseWidth + (Math.random()*40-20);
      const startY = (originY/100) * baseHeight + (Math.random()*10-5);
      piece.style.left = `${startX}px`;
      piece.style.top = `${startY}px`;
      const rot = Math.random()*360;
      const sx = 0.8 + Math.random()*0.8;
      const duration = 900 + Math.random()*900;
      piece.style.transform = `rotate(${rot}deg) scale(${sx})`;
      confettiContainer.appendChild(piece);

      const dx = (Math.random()*200 - 100);
      const dy = 220 + Math.random()*180;
      const dr = (Math.random()*720 - 360);
      piece.animate([
        { transform: `translate(0px,0px) rotate(${rot}deg)`, opacity: 1 },
        { transform: `translate(${dx}px, ${dy}px) rotate(${rot + dr}deg)`, opacity: 0 }
      ], {
        duration,
        easing: 'cubic-bezier(.16,.84,.52,1)',
        iterations: 1,
        fill: 'forwards'
      });

      setTimeout(() => {
        try { confettiContainer.removeChild(piece); } catch(e) {}
      }, duration + 60);
    }
  }

  // Single AudioContext; enable after user gesture
  let audioCtx = null;
  let audioAllowed = false;
  function initAudioOnce(){
    if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  }
  function enableAudioOnFirstInteraction(){
    try {
      initAudioOnce();
      if (audioCtx.state === 'suspended') audioCtx.resume().catch(()=>{});
      audioAllowed = true;
    } catch(e){}
  }
  document.addEventListener('click', enableAudioOnFirstInteraction, { once: true });

  function playDing() {
    try {
      if (!audioAllowed) return;
      const ctx = audioCtx;
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = 'sine';
      o.frequency.setValueAtTime(880, ctx.currentTime);
      o.frequency.exponentialRampToValueAtTime(440, ctx.currentTime + 0.18);
      g.gain.setValueAtTime(0, ctx.currentTime);
      g.gain.linearRampToValueAtTime(0.12, ctx.currentTime + 0.01);
      g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.5);
      o.connect(g); g.connect(ctx.destination); o.start();
      setTimeout(()=>{ o.stop(); }, 600);
    } catch(e){}
  }

  function animateNumber(el, to) {
    const from = parseInt(el.textContent.replace(/,/g,'')) || 0;
    const duration = 700;
    const start = performance.now();
    function step(now){
      const t = Math.min(1, (now - start)/duration);
      const val = Math.floor(from + (to - from)*easeOutCubic(t));
      el.textContent = val.toLocaleString();
      if (t < 1) requestAnimationFrame(step);
    }
    requestAnimationFrame(step);
  }

  function updateStats(data) {
    totalCount++;
    animateNumber(totalCountEl, totalCount);

    countryCounts[data.country] = (countryCounts[data.country] || 0) + 1;
    const hottest = Object.entries(countryCounts).sort((a,b)=>b[1]-a[1])[0];
    if (hottest) {
      const countryObj = countries.find(c => c.name === hottest[0]);
      hotCountryEl.textContent = `${countryObj.flag} ${countryObj.name} (${hottest[1]})`;
    }

    recentCountries.push(data.country);
    if (recentCountries.length > 6) recentCountries.shift();
    const last = recentCountries[recentCountries.length - 1];
    let streak = 0;
    for (let i = recentCountries.length - 1; i >= 0; i--) {
      if (recentCountries[i] === last) streak++; else break;
    }
    if (streak > 1) joinStreakEl.textContent = `${streak} people from ${last} joined in a row!`;
    else joinStreakEl.textContent = `Last join: ${data.country} ${data.flag}`;
  }

  function pushLeaderboard(next) {
    Array.from(leaderboardList.children).forEach(li => {
      li.classList.remove('active-entry');
      const dot = li.querySelector('.entry-active-dot'); if (dot) dot.remove();
      const label = li.querySelector('.just-now-label'); if (label) label.remove();
    });

    const li = document.createElement("li");
    li.innerHTML = `
      <img src="${next.avatar}" alt="${next.displayName} avatar" loading="lazy" decoding="async">
      <div style="display:inline-block;">
        <div style="font-weight:700;">${escapeHtml(next.displayName)}</div>
        <div style="font-size:12px; opacity:0.9;">${next.flag} ${escapeHtml(next.country)} <small style="opacity:0.85">(${next.time})</small></div>
      </div>
    `;
    const img = li.querySelector('img'); if (img) applyImageFallback(img);

    const activeDot = document.createElement('span'); activeDot.className = 'entry-active-dot';
    li.appendChild(activeDot);
    const justNow = document.createElement('span'); justNow.className = 'just-now-label'; justNow.textContent = 'Just now';
    li.querySelector('small').after(justNow);

    li.classList.add('active-entry');
    leaderboardList.insertBefore(li, leaderboardList.firstChild);
    while (leaderboardList.children.length > 5) leaderboardList.removeChild(leaderboardList.lastChild);
  }

  /* --- Initial render + cycle --- */
  members[index].time = 'just now';
  renderMember(member1, members[index], true);
  member1.classList.add("show");
  updateStats(members[index]);
  pushLeaderboard(members[index]);
  confettiBurst(28, 50, 15);
  playDing();

  function showNextMember() {
    members.forEach(m => { if (m.time === 'just now') m.time = 'a few mins ago'; });

    index = (index + 1) % members.length;
    const next = members[index];
    next.time = 'just now';

    if (active === 1) {
      renderMember(member2, next, true);
      member2.classList.add("show");
      member1.classList.remove("show");
      active = 2;
    } else {
      renderMember(member1, next, true);
      member1.classList.add("show");
      member2.classList.remove("show");
      active = 1;
    }

    pushLeaderboard(next);
    updateStats(next);
    confettiBurst(28, 50, 15);
    playDing();
  }

  const intervalMs = (displayTime + fadeDuration) * 1000;
  setInterval(showNextMember, intervalMs);

  setTimeout(() => {
    document.querySelectorAll('.member-card img, .leaderboard img').forEach(img => applyImageFallback(img));
  }, 500);
</script>

    <!-- Notification Section: Browser + Signal subscribe -->
    <section class="notify" role="region" aria-label="Launch reminders">
      <div class="notify-box">
        <span class="emoji" aria-hidden="true">👉</span>
      </div>
      <div class="notify-cta">
        <div class="notify-caption"><strong>Get daily launch reminders + bonus alerts — choose Signal or browser.</strong></div>
        <div class="notify-small">We’ll nudge you every day until launch and remind you about activation so you don’t miss priority bonuses.</div>
      </div>
      <div style="margin-left:18px;display:flex;flex-direction:column;align-items:flex-end;gap:10px;">
        <button id="notifyBtn" type="button" class="btn btn-join pulse" aria-label="Allow browser reminders">Browser Reminders</button>
        <button id="signalBtn" type="button" class="btn btn-join" aria-label="Subscribe via Signal">Remind me on Signal</button>
        <div id="subBadge" class="badge" style="display:none">Subscribed</div>
      </div>
    </section>

    <!-- Ways of Earning Section -->
    <section class="earning">
      <h2 class="big-header">Ways of Earning</h2>
      <div class="earn-grid">
        <div class="earn-card">▶️ Watching YouTube Videos<br><span>Est: KSh 2k/day · KSh 14k/week</span></div>
        <div class="earn-card">▶️ Watching TikTok Videos<br><span>Est: KSh 2k/day · KSh 14k/week</span></div>
        <div class="earn-card">▶️ Watching Instagram Videos<br><span>Est: KSh 1.5k/day · KSh 10.5k/week</span></div>
        <div class="earn-card">▶️ Clicking Netflix Ads<br><span>Est: KSh 3k/day · KSh 21k/week</span></div>
        <div class="earn-card">🎮 Aviator (Mini-games)<br><span>Est: KSh 5k/day · KSh 35k/week (higher risk)</span></div>
        <div class="earn-card">😂 Creating Memes<br><span>Est: KSh 2k/day · KSh 14k/week</span></div>
        <div class="earn-card">✍️ Academic Writing<br><span>Est: KSh 7k/day · KSh 49k/week</span></div>
        <div class="earn-card">🤝 Affiliate Marketing<br><span>Est: KSh 5k/day · KSh 35k/week</span></div>
        <div class="earn-card">📋 Surveys<br><span>Est: KSh 1k/day · KSh 7k/week</span></div>
        <div class="earn-card">🎁 Welcome Bonus<br><span>One-time credit: KSh 1k–5k (bonus on signup)</span></div>
      </div>
      <p style="text-align:center;color:rgba(255,255,255,0.7);margin-top:18px;font-size:14px">Earnings shown are estimates and depend on effort, location, and market conditions. Results may vary.</p>
    </section>

    <!-- Bots Section -->
    <section class="bots">
      <h2 class="big-header">🤖 Smart Bots to Guide You</h2>

      <div class="bot">
        <button class="bot-q" type="button">💪 Motivation Bot: Why start an online business?</button>
        <div class="bot-a">Financial freedom starts with small consistent steps. Helalink pairs training + small tasks so you earn while learning.<div class="bot-actions"><button class="btn-ghost" data-wa-message="I'm%20interested%20in%20joining%20-%20tell%20me%20about%20bonuses" type="button">Join via WhatsApp</button><button class="btn-ghost" data-action="more" type="button">Tell me more</button></div></div>
      </div>

      <div class="bot">
        <button class="bot-q" type="button">📚 Training Bot: How will I learn?</button>
        <div class="bot-a">We provide step-by-step lessons, short videos, and practice tasks. Newcomers get priority coaching during launch.<div class="bot-actions"><button class="btn-ghost" data-wa-message="How%20do%20I%20start%20the%20training%20for%20Helalink%3F" type="button">Start Training (WhatsApp)</button><button class="btn-ghost" data-action="curriculum" type="button">See curriculum</button></div></div>
      </div>

      <div class="bot">
        <button class="bot-q" type="button">🛠 Onboarding Bot: Why pay activation fee?</button>
        <div class="bot-a">Activation fees cover onboarding, verification & bonus pools. Think of it as capital to kickstart your micro-business. <div class="bot-actions"><button class="btn-ghost" data-wa-message="I%20want%20to%20pay%20the%20activation%20fee%20-%20how%20do%20I%20proceed%3F" type="button">Pay/Ask on WhatsApp</button></div></div>
      </div>

      <div class="bot">
        <button class="bot-q" type="button">🤝 Support Bot: Do I need an account?</button>
        <div class="bot-a">Yes — accounts secure your earnings, track affiliate activity and enable payouts. Creating an account is quick and free (fee applies to activation).<div class="bot-actions"><button class="btn-ghost" data-wa-message="I%20want%20to%20create%20an%20account%20-%20what%20do%20I%20need%3F" type="button">Create account (WhatsApp)</button></div></div>
      </div>
    </section>

    <div id="toast" class="toast" role="status" aria-live="polite"></div>

    <footer>© 2025 Helalink • Launching September 13 • Early access via WhatsApp & Signal</footer>
  </div>

  <script>
    // Helper: open WhatsApp with prefilled message (safe)
    function openUrlSafe(url){
      const a = document.createElement('a');
      a.href = url; a.target = '_blank'; a.rel = 'noopener noreferrer';
      document.body.appendChild(a); a.click(); a.remove();
    }
    function openWhatsApp(message){
      const phone = '254717028877';
      const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
      openUrlSafe(url);
    }
    function openSignal(){
      const phone = '+254717028877';
      const url = `https://signal.me/#p/${phone}`;
      openUrlSafe(url);
    }

    document.addEventListener('DOMContentLoaded', ()=>{
      // Typing effect
      const typingEl = document.getElementById('typingText');
      const fullText = 'HELALINK — coming soon';
      let idx = 0; const speed = 85;
      (function type(){
        if(idx <= fullText.length){
          typingEl.textContent = fullText.slice(0, idx++);
          setTimeout(type, speed);
        }
      })();

      // Countdown
      const d=document.getElementById('d'), h=document.getElementById('h'), m=document.getElementById('m'), s=document.getElementById('s');
      const launch = new Date('2025-09-13T00:00:00');
      function tick(){
        const now = new Date();
        let diff = launch - now;
        if(diff <= 0){ d.textContent=h.textContent=m.textContent=s.textContent='00'; return; }
        const days = Math.floor(diff/(1000*60*60*24)); diff%= (1000*60*60*24);
        const hours= Math.floor(diff/(1000*60*60)); diff%= (1000*60*60);
        const mins = Math.floor(diff/(1000*60)); diff%= (1000*60);
        const secs = Math.floor(diff/1000);
        d.textContent = String(days).padStart(2,'0');
        h.textContent = String(hours).padStart(2,'0');
        m.textContent = String(mins).padStart(2,'0');
        s.textContent = String(secs).padStart(2,'0');
      }
      tick(); setInterval(tick,1000);

      // WhatsApp CTA (main)
      const joinBtn = document.getElementById('joinBtn');
      joinBtn.addEventListener('click', async ()=>{
        createBurst(18);
        // user gesture - attempt to subscribe to Push then open WhatsApp
        try {
          await subscribeForHelalink(); // registers sw and subscribes; shows permission prompt
          document.getElementById('subBadge').style.display = 'inline-block';
        } catch(e){
          console.warn('subscribe failed', e);
        } finally {
          openWhatsApp('Hi! I want to join Helalink early. Please send onboarding steps.');
        }
      });

      // Background canvas (waves + particles)
      const bg = document.getElementById('bgCanvas');
      const g = bg.getContext('2d');
      function resize(){ bg.width = window.innerWidth; bg.height = window.innerHeight; }
      window.addEventListener('resize', resize); resize();
      const particleCount = window.innerWidth < 700 ? 60 : 140;
      const particles = Array.from({length: particleCount}, ()=>({x:Math.random()*bg.width,y:Math.random()*bg.height,r:Math.random()*1.6+0.4,vx:(Math.random()-0.5)*0.28,vy:(Math.random()-0.5)*0.28}));
      let t=0;
      (function draw(){
        g.clearRect(0,0,bg.width,bg.height);
        const grad = g.createLinearGradient(0,0,bg.width,bg.height);
        grad.addColorStop(0,'rgba(5,6,22,0.92)'); grad.addColorStop(1,'rgba(5,12,34,0.92)');
        g.fillStyle = grad; g.fillRect(0,0,bg.width,bg.height);
        for(let j=0;j<3;j++){
          g.beginPath();
          const amp = 18 + j*16; const freq = 0.0022 + j*0.0012;
          g.moveTo(0,bg.height/2);
          for(let x=0;x<bg.width;x+=10){
            const y = bg.height/2 + Math.sin((x*freq)+t*0.002+j)*amp + j*18;
            g.lineTo(x,y);
          }
          g.lineTo(bg.width,bg.height); g.lineTo(0,bg.height);
          g.fillStyle = `rgba(${40+j*35},${60+j*40},${120+j*30},0.055)`; g.fill();
        }
        particles.forEach(p=>{ p.x+=p.vx; p.y+=p.vy; if(p.x<0)p.x=bg.width; if(p.x>bg.width)p.x=0; if(p.y<0)p.y=bg.height; if(p.y>bg.height)p.y=0; g.beginPath(); g.arc(p.x,p.y,p.r,0,Math.PI*2); g.fillStyle='rgba(255,255,255,0.06)'; g.fill(); });
        t++; requestAnimationFrame(draw);
      })();

      // coin/note drop inside circle
      const coinStage = document.querySelector('.coin-stage');
      function createMoney(){
        if(!coinStage) return;
        const isNote = Math.random() > 0.5;
        const el = document.createElement('div');
        el.className = 'money' + (isNote ? ' note' : '');
        const lbl = document.createElement('div'); lbl.className='label';
        lbl.textContent = isNote ? 'KSh' : '';
        el.appendChild(lbl);
        const W = coinStage.clientWidth; const left = Math.random() * (W - 40);
        el.style.left = left + 'px';
        const dx = (Math.random()*120 - 60).toFixed(0) + 'px';
        el.style.setProperty('--dx', dx);
        const dur = 1800 + Math.random()*2600;
        el.style.animation = `fall ${dur}ms cubic-bezier(.2,.9,.2,1)`;
        coinStage.appendChild(el);
        el.addEventListener('animationend', ()=> el.remove());
      }
      function createBurst(n){
        for(let i=0;i<n;i++){
          setTimeout(createMoney, i*60 + Math.random()*120);
        }
      }
      const coinInterval = window.innerWidth < 700 ? 1100 : 700;
      let coinTimer = setInterval(()=>{ createMoney(); }, coinInterval);
      const logoWrap = document.querySelector('.logo-wrap');
      logoWrap.addEventListener('mouseenter', ()=>{ createBurst(6); });

      // Bots accordion + actions
      document.querySelectorAll('.bot-q').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const ans = btn.nextElementSibling;
          const open = ans.style.display === 'block';
          document.querySelectorAll('.bot-a').forEach(a=>a.style.display='none');
          ans.style.display = open ? 'none' : 'block';
          if(!open){ showToast('Tip: Use the WhatsApp buttons inside answers to join quickly'); }
        });
      });

      // Bot action buttons (delegated)
      document.querySelectorAll('.bot-actions').forEach(group=>{
        group.addEventListener('click', (e)=>{
          const t = e.target;
          if(t.matches('[data-wa-message]')){
            const msg = decodeURIComponent(t.getAttribute('data-wa-message'));
            createBurst(8); openWhatsApp(msg);
          } else if(t.matches('[data-action]')){
            const a = t.getAttribute('data-action');
            if(a === 'more') showToast('We match weekly goals with rewards — check updates in WhatsApp.');
            if(a === 'curriculum') showToast('Curriculum: Basics → Tasks → Scaling → Referral growth.');
          }
        });
      });

      // Signal subscribe button
      document.getElementById('signalBtn').addEventListener('click', ()=>{
        openSignal(); localStorage.setItem('helalink_signal_sub', 'requested'); document.getElementById('subBadge').style.display = 'inline-block'; showToast('Opened Signal — send the message to subscribe and we\\'ll add you to reminders.');
      });

      // Toast helper
      const toastEl = document.getElementById('toast');
      let toastTimer = null;
      function showToast(msg, ms=4200){ toastEl.textContent = msg; toastEl.style.display = 'block'; clearTimeout(toastTimer); toastTimer = setTimeout(()=>{ toastEl.style.display='none'; }, ms); }

      // safe open of external links in bots
      document.querySelectorAll('.btn-ghost[data-wa-message]').forEach(b => b.setAttribute('type','button'));
    });

    /***** PUSH SUBSCRIPTION CLIENT-SIDE CODE *****/
    // subscribeForHelalink() registers SW, requests permission, subscribes and POSTs to /api/subscribe
    async function subscribeForHelalink() {
      if (!('serviceWorker' in navigator)) throw new Error('ServiceWorker not supported');
      if (!('PushManager' in window)) throw new Error('Push not supported');

      // register SW
      const reg = await navigator.serviceWorker.register('/sw.js');
      console.log('SW registered:', reg);

      // request permission
      const permission = await Notification.requestPermission();
      if (permission !== 'granted') throw new Error('Notification permission denied');

      // fetch VAPID key
      const resp = await fetch('/api/vapidPublicKey');
      if (!resp.ok) throw new Error('Failed to fetch VAPID public key');
      const vapidPublicKey = await resp.text();

      // convert base64 public key to Uint8Array
      function urlBase64ToUint8Array(base64String) {
        const padding = '='.repeat((4 - base64String.length % 4) % 4);
        const base64 = (base64String + padding).replace(/-/g, '+').replace(/_/g, '/');
        const rawData = window.atob(base64);
        const outputArray = new Uint8Array(rawData.length);
        for (let i = 0; i < rawData.length; ++i) {
          outputArray[i] = rawData.charCodeAt(i);
        }
        return outputArray;
      }

      const sub = await reg.pushManager.subscribe({
        userVisibleOnly: true,
        applicationServerKey: urlBase64ToUint8Array(vapidPublicKey)
      });

      // prepare schedule: launchIso must match countdown. dailyTimes three times a day.
      const launchIso = '2025-09-13T00:00:00';
      const dailyTimes = ['09:00','13:00','19:00'];

      const payload = { subscription: sub, launchIso, dailyTimes, timezone: 'Africa/Nairobi', meta: {source: 'site'} };

      const r = await fetch('/api/subscribe', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify(payload)
      });
      if (!r.ok) {
        const txt = await r.text();
        throw new Error('Server subscribe failed: ' + txt);
      }
      const json = await r.json();
      console.log('Server subscribe response', json);

      // store id for later unsubscribe if needed
      localStorage.setItem('helalink_sub_id', json.id);
      return json;
    }

    // Optionally allow manual subscribe via the button "Browser Reminders"
    document.addEventListener('click', (e) => {
      const t = e.target;
      if (t && t.id === 'notifyBtn') {
        // user gesture -> call subscribe flow
        subscribeForHelalink().then(()=> {
          try { document.getElementById('subBadge').style.display='inline-block'; } catch(e){}
          showToast('Subscribed to browser reminders.');
        }).catch(err => {
          console.error(err);
          showToast('Could not subscribe: ' + (err.message || err));
        });
      }
    });

    // Small helper createBurst used earlier
    function createBurst(n){ for(let i=0;i<n;i++){ setTimeout(()=>{ const coinStage = document.querySelector('.coin-stage'); if(!coinStage) return; const isNote = Math.random() > 0.5; const el = document.createElement('div'); el.className = 'money' + (isNote ? ' note' : ''); const lbl = document.createElement('div'); lbl.className='label'; lbl.textContent = isNote ? 'KSh' : ''; el.appendChild(lbl); const W = coinStage.clientWidth; const left = Math.random() * (W - 40); el.style.left = left + 'px'; const dx = (Math.random()*120 - 60).toFixed(0) + 'px'; el.style.setProperty('--dx', dx); const dur = 1800 + Math.random()*2600; el.style.animation = `fall ${dur}ms cubic-bezier(.2,.9,.2,1)`; coinStage.appendChild(el); el.addEventListener('animationend', ()=> el.remove()); }, i*40 + Math.random()*80); } }
  </script>
</body>
</html>
